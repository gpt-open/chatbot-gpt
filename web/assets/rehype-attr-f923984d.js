import{v as g}from"./unist-util-visit-4a8cdef4.js";const y=(r="")=>(r.match(/([^?=&]+)(=([^&]*))/g)||[]).reduce((t,e)=>(t[e.slice(0,e.indexOf("="))]=e.slice(e.indexOf("=")+1),t),{}),a=(r=[],t)=>{let e=t;for(;e>-1;){if(e--,!r[e])return;if(r[e]&&r[e].value&&r[e].value.replace(/(\n|\s)/g,"")!==""||r[e].type!=="text")return!/^rehype:/.test(r[e].value)||r[e].type!=="comment"?void 0:r[e]}},h=(r=[],t,e,p)=>{let n=t;for(;n<r.length;)if(n++,e){const i=r[n];if(i&&i.value&&i.value.replace(/(\n|\s)/g,"")!==""||r[n]&&r[n].type==="element")return i.tagName===e?i:void 0}else{const i=r[n];if(!i||i.type==="element"||i.type==="text"&&i.value.replace(/(\n|\s)/g,"")!=="")return;if(i.type&&/^(comment|raw)$/ig.test(i.type))return i.value&&!/^rehype:/.test(i.value.replace(/^(\s+)?<!--(.*?)-->/,"$2")||"")?void 0:p?h(r,n,"pre",p)?void 0:(i.value=(i.value||"").replace(/^(\n|\s)+/,""),i):(i.value=(i.value||"").replace(/^(\n|\s)+/,""),i)}},o=({value:r=""})=>{const t=y(r.replace(/^<!--(.*?)-->/,"$1").replace(/^rehype:/,""));return Object.keys(t).forEach(e=>{t[e]==="true"&&(t[e]=!0),t[e]==="false"&&(t[e]=!1),typeof t[e]=="string"&&!/^0/.test(t[e])&&!isNaN(+t[e])&&(t[e]=+t[e])}),t},f=(r,t,e)=>e==="string"?{...r,"data-config":JSON.stringify({...t,rehyp:!0})}:e==="attr"?{...r,...t}:{...r,"data-config":{...t,rehyp:!0}},m=(r={})=>{const{properties:t="data",codeBlockParames:e=!0}=r;return p=>{g(p,"element",(n,i,s)=>{if(e&&n.tagName==="pre"&&n&&Array.isArray(n.children)&&s&&Array.isArray(s.children)&&s.children.length>1){const l=n.children[0];if(l&&l.tagName==="code"&&typeof i=="number"){const c=a(s.children,i);if(c){const u=o(c);Object.keys(u).length>0&&(n.properties={...n.properties,"data-type":"rehyp"},l.properties=f(l.properties,u,t))}}}if(/^(em|strong|b|a|i|p|pre|kbd|blockquote|h(1|2|3|4|5|6)|code|table|img|del|ul|ol)$/.test(n.tagName)&&s&&Array.isArray(s.children)&&typeof i=="number"){const l=h(s.children,i,"",e);if(l){const c=o(l);Object.keys(c).length>0&&(n.properties=f(n.properties,c,t))}}})}},b=m;export{b as r};
