import{a as p,j as r}from"./@uiw-fbcd8db3.js";import{r as s}from"./react-dff1db10.js";import{V as u}from"./react-virtuoso-ece04c36.js";import{F as f}from"./index-4998cd12.js";import{u as c,f as x,p as h,a as v,B as g,O as C,L as N}from"./index-3c264776.js";import{c as y}from"./clsx-8a2321ee.js";import{t as w}from"./i18next-30b8d63f.js";import{b as I,e as M,O as _}from"./react-router-6caf0c27.js";import"./@babel-d99aad0a.js";import"./rehype-prism-plus-f8916250.js";import"./parse-numeric-range-9242e1ec.js";import"./refractor-f0b25896.js";import"./hastscript-aed2bf9f.js";import"./property-information-33d7f5d8.js";import"./space-separated-tokens-eedf1754.js";import"./comma-separated-tokens-495b557e.js";import"./hast-util-parse-selector-2e5db8ec.js";import"./parse-entities-886a4bc9.js";import"./character-entities-legacy-d39742d7.js";import"./character-reference-invalid-da0c882b.js";import"./is-decimal-dfcce753.js";import"./is-hexadecimal-f403e296.js";import"./is-alphanumerical-4b9c73ef.js";import"./is-alphabetical-ea837323.js";import"./decode-named-character-reference-29ded5ae.js";import"./unist-util-visit-4a8cdef4.js";import"./unist-util-visit-parents-9b4d9404.js";import"./unist-util-is-7e122464.js";import"./hast-util-to-string-00227f59.js";import"./unist-util-filter-35bc8277.js";import"./rehype-rewrite-eb153844.js";import"./hast-util-select-9331a119.js";import"./css-selector-parser-8b709f9f.js";import"./direction-ad776bdc.js";import"./devlop-d057c9d1.js";import"./bcp-47-match-575b2c5d.js";import"./nth-check-c1dafc58.js";import"./boolbase-d6ee5218.js";import"./zwitch-18fef54d.js";import"./hast-util-has-property-d1e39f7e.js";import"./hast-util-whitespace-675c549c.js";import"./rehype-attr-f923984d.js";import"./remark-github-blockquote-alert-8cef172c.js";import"./remark-gfm-20e428bd.js";import"./micromark-extension-gfm-298f896c.js";import"./micromark-util-combine-extensions-34ef5cdc.js";import"./micromark-util-chunked-6f054bfc.js";import"./micromark-extension-gfm-autolink-literal-8a85e3f8.js";import"./micromark-util-character-c2e05b35.js";import"./micromark-extension-gfm-footnote-8cf02a4f.js";import"./micromark-factory-space-d1556c33.js";import"./micromark-util-normalize-identifier-dfdf0387.js";import"./micromark-core-commonmark-c07aab3d.js";import"./micromark-util-classify-character-e6f2af83.js";import"./micromark-util-resolve-all-8a85a8df.js";import"./micromark-util-subtokenize-df14a385.js";import"./micromark-factory-destination-61e3e50f.js";import"./micromark-factory-label-3c24794b.js";import"./micromark-factory-title-4ecadfa4.js";import"./micromark-factory-whitespace-d4a599a3.js";import"./micromark-util-html-tag-name-eaa6d7c0.js";import"./micromark-extension-gfm-strikethrough-29e1f4c9.js";import"./micromark-extension-gfm-table-76f075a8.js";import"./micromark-extension-gfm-task-list-item-fd9ad625.js";import"./mdast-util-gfm-1f81a492.js";import"./mdast-util-gfm-autolink-literal-9953eda7.js";import"./ccount-97b3fed9.js";import"./mdast-util-find-and-replace-b2f01ca3.js";import"./mdast-util-gfm-footnote-31843ff4.js";import"./mdast-util-gfm-strikethrough-02821e6f.js";import"./mdast-util-gfm-table-588424c3.js";import"./markdown-table-e4bb1f36.js";import"./mdast-util-to-markdown-0c832652.js";import"./longest-streak-062c506f.js";import"./mdast-util-to-string-bfd41500.js";import"./mdast-util-phrasing-2f08fe12.js";import"./mdast-util-gfm-task-list-item-90dca6dd.js";import"./react-markdown-f7386cc6.js";import"./unified-e9e478f7.js";import"./bail-0fe607cf.js";import"./extend-c40a5e11.js";import"./trough-69dd48ea.js";import"./vfile-33e078b6.js";import"./vfile-message-9c3a211a.js";import"./unist-util-stringify-position-7b16d8bf.js";import"./remark-parse-71140eaa.js";import"./mdast-util-from-markdown-0e6c3239.js";import"./micromark-util-decode-numeric-character-reference-e471f84f.js";import"./micromark-util-decode-string-c1ef5903.js";import"./micromark-65d6e649.js";import"./remark-rehype-a950e1f8.js";import"./mdast-util-to-hast-d1f82779.js";import"./@ungap-d56ab8cf.js";import"./micromark-util-sanitize-uri-ce9db7f5.js";import"./unist-util-position-bb1bbaf7.js";import"./trim-lines-00010efb.js";import"./hast-util-to-jsx-runtime-ebad87b4.js";import"./style-to-object-9435a2b9.js";import"./inline-style-parser-e2a37bce.js";import"./estree-util-is-identifier-name-e0420bc7.js";import"./html-url-attributes-cc94b481.js";import"./rehype-raw-73b755a6.js";import"./hast-util-raw-8bc647f5.js";import"./html-void-elements-491fdcba.js";import"./entities-9253376c.js";import"./web-namespaces-a6665c10.js";import"./hast-util-from-parse5-d7b45037.js";import"./vfile-location-f7aeb950.js";import"./hast-util-to-parse5-206b4890.js";import"./rehype-ignore-14d04115.js";import"./rehype-slug-66bdf6f7.js";import"./github-slugger-15b5d832.js";import"./hast-util-heading-rank-7e277c28.js";import"./rehype-autolink-headings-df90c626.js";import"./hast-util-is-element-29e512ec.js";import"./react-dom-f42ccf45.js";import"./scheduler-765c72db.js";import"./dayjs-83ab33dc.js";import"./i18next-browser-languagedetector-fca6a14c.js";import"./localforage-660b2602.js";import"./react-i18next-0e383b52.js";import"./react-query-4ad05a68.js";import"./react-router-dom-9dc85496.js";import"./@remix-run-dce5b06c.js";import"./classnames-c5f7966c.js";import"./@emotion-c0b5c018.js";import"./stylis-5efc5547.js";import"./@ctrl-fb5a5473.js";import"./@openim-b42991a8.js";import"./ahooks-087edcb4.js";import"./tslib-2295a9e7.js";import"./lodash-45a63edf.js";import"./react-fast-compare-8fc01d60.js";import"./resize-observer-polyfill-0f9f8adb.js";import"./react-image-file-resizer-082b4f54.js";import"./open-im-sdk-wasm-d275cb6c.js";import"./zustand-389b6932.js";import"./use-sync-external-store-21b41d34.js";import"./axios-9cbf0d09.js";import"./uuid-4a60fe23.js";import"./date-fns-ddf8a5f4.js";import"./mitt-f7ef348c.js";import"./scroll-into-view-if-needed-582d6ca4.js";import"./compute-scroll-into-view-e3f0ecc2.js";import"./throttle-debounce-87e7e444.js";import"./react-draggable-6c3d17fb.js";import"./prop-types-08c7c3df.js";import"./@livekit-a264025c.js";import"./livekit-client-bb1568a6.js";import"./loglevel-52fed41a.js";import"./rxjs-eb9efe3f.js";import"./usehooks-ts-f5852a9b.js";import"./lodash.debounce-437ec0ef.js";import"./react-use-7b72ee3d.js";import"./copy-to-clipboard-8651a7ed.js";import"./toggle-selection-93f4ad84.js";import"./react-resizable-panels-8afeaa56.js";import"./xgplayer-791f2daf.js";import"./twemoji-540bbbe7.js";import"./lodash-es-db56b0a0.js";import"./@ckeditor-b393bf11.js";import"./color-convert-d47c3cb3.js";import"./color-name-b7949e8c.js";import"./emoji-picker-element-f6bf587d.js";const d={"conversation-item":"_conversation-item_1cdkq_1","conversation-item-pined":"_conversation-item-pined_1cdkq_4"},b=({isActive:m,conversation:t})=>{const a=I(),n=c(o=>o.updateCurrentConversation),e=()=>{m||(n({...t}),a(`/chat/${t.conversationID}`))},l=s.useMemo(()=>{let o="";try{o=x(JSON.parse(t.latestMsg))}catch{o=w("messageDescription.catchMessage")}return h(o)},[t.draftText,t.latestMsg,m]),i=v(t.latestMsgSendTime);return p("div",{className:y(d["conversation-item"],"border border-transparent",(m||t.isPinned)&&"bg-[var(--primary-active)]",t.isPinned&&d["conversation-item-pinned"]),onClick:e,children:[r(g,{size:"small",count:t.unreadCount,children:r(C,{src:t.faceURL,isgroup:!!t.groupID,text:t.showName})}),p("div",{className:"ml-3 flex h-11 flex-1 flex-col justify-between overflow-hidden",children:[p("div",{className:"flex items-center justify-between",children:[r("div",{className:"flex-1 truncate font-medium",children:t.showName}),r("div",{className:"ml-2 text-xs text-[var(--sub-text)]",children:i})]}),r("div",{className:"flex items-center",children:r("div",{className:"flex min-h-[16px] flex-1 items-center overflow-hidden text-xs",children:r("div",{className:"truncate text-[rgba(81,94,112,0.5)]",dangerouslySetInnerHTML:{__html:l}})})})]})]})},L=s.memo(b),B=()=>{const{conversationID:m}=M(),t=c(i=>i.conversationList),a=c(i=>i.getConversationListByReq),n=s.useRef(null),e=s.useRef(!0);return r("div",{children:r(f,{needHidden:!!m,wrapClassName:"left-2 right-2 top-1.5 flex flex-col",children:r(u,{className:"flex-1",data:t,ref:n,endReached:async()=>{e.current&&(e.current=await a(!0))},computeItemKey:(i,o)=>o.conversationID,itemContent:(i,o)=>r(L,{isActive:m===o.conversationID,conversation:o})})})})},Do=()=>p(N,{className:"flex-row",children:[r(B,{}),r(_,{})]});export{Do as Chat};
