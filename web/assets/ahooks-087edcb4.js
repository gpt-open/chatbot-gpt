import{_ as y,a as b,b as T,c as ae,d as ie,e as X,f as U}from"./tslib-2295a9e7.js";import{r as v}from"./react-dff1db10.js";import{d as oe,t as Y}from"./lodash-45a63edf.js";import"./dayjs-83ab33dc.js";import{i as ce}from"./react-fast-compare-8fc01d60.js";import"./resize-observer-polyfill-0f9f8adb.js";var fe=function(e){return function(r,n){var t=v.useRef(!1);e(function(){return function(){t.current=!1}},[]),e(function(){if(!t.current)t.current=!0;else return r()},n)}},A=function(e){return typeof e=="function"},se=function(e){return typeof e=="string"},Z=function(e){return typeof e=="number"},le=!1;const j=le;function M(e){j&&(A(e)||console.error("useMemoizedFn expected parameter is a function, got ".concat(typeof e)));var r=v.useRef(e);r.current=v.useMemo(function(){return e},[e]);var n=v.useRef();return n.current||(n.current=function(){for(var t=[],u=0;u<arguments.length;u++)t[u]=arguments[u];return r.current.apply(this,t)}),n.current}const k=fe(v.useEffect);var I=function(e,r){var n=r.manual,t=r.ready,u=t===void 0?!0:t,i=r.defaultParams,o=i===void 0?[]:i,f=r.refreshDeps,c=f===void 0?[]:f,a=r.refreshDepsAction,l=v.useRef(!1);return l.current=!1,k(function(){!n&&u&&(l.current=!0,e.run.apply(e,y([],b(o),!1)))},[u]),k(function(){l.current||n||(l.current=!0,a?a():e.refresh())},y([],b(c),!1)),{onBefore:function(){if(!u)return{stopNow:!0}}}};I.onInit=function(e){var r=e.ready,n=r===void 0?!0:r,t=e.manual;return{loading:!t&&n}};const de=I;function q(e,r){if(e===r)return!0;for(var n=0;n<e.length;n++)if(!Object.is(e[n],r[n]))return!1;return!0}function _(e,r){var n=v.useRef({deps:r,obj:void 0,initialized:!1}).current;return(n.initialized===!1||!q(n.deps,r))&&(n.deps=r,n.obj=e(),n.initialized=!0),n.obj}function B(e){var r=v.useRef(e);return r.current=e,r}var ve=function(e){j&&(A(e)||console.error("useUnmount expected parameter is a function, got ".concat(typeof e)));var r=B(e);v.useEffect(function(){return function(){r.current()}},[])};const H=ve;var K=new Map,me=function(e,r,n){var t=K.get(e);t!=null&&t.timer&&clearTimeout(t.timer);var u=void 0;r>-1&&(u=setTimeout(function(){K.delete(e)},r)),K.set(e,T(T({},n),{timer:u}))},pe=function(e){return K.get(e)},N=new Map,he=function(e){return N.get(e)},ge=function(e,r){N.set(e,r),r.then(function(n){return N.delete(e),n}).catch(function(){N.delete(e)})},$={},ye=function(e,r){$[e]&&$[e].forEach(function(n){return n(r)})},z=function(e,r){return $[e]||($[e]=[]),$[e].push(r),function(){var t=$[e].indexOf(r);$[e].splice(t,1)}},be=function(e,r){var n=r.cacheKey,t=r.cacheTime,u=t===void 0?5*60*1e3:t,i=r.staleTime,o=i===void 0?0:i,f=r.setCache,c=r.getCache,a=v.useRef(),l=v.useRef(),s=function(d,m){f?f(m):me(d,u,m),ye(d,m.data)},p=function(d,m){return m===void 0&&(m=[]),c?c(m):pe(d)};return _(function(){if(n){var d=p(n);d&&Object.hasOwnProperty.call(d,"data")&&(e.state.data=d.data,e.state.params=d.params,(o===-1||new Date().getTime()-d.time<=o)&&(e.state.loading=!1)),a.current=z(n,function(m){e.setState({data:m})})}},[]),H(function(){var d;(d=a.current)===null||d===void 0||d.call(a)}),n?{onBefore:function(d){var m=p(n,d);return!m||!Object.hasOwnProperty.call(m,"data")?{}:o===-1||new Date().getTime()-m.time<=o?{loading:!1,data:m==null?void 0:m.data,error:void 0,returnNow:!0}:{data:m==null?void 0:m.data,error:void 0}},onRequest:function(d,m){var h=he(n);return h&&h!==l.current?{servicePromise:h}:(h=d.apply(void 0,y([],b(m),!1)),l.current=h,ge(n,h),{servicePromise:h})},onSuccess:function(d,m){var h;n&&((h=a.current)===null||h===void 0||h.call(a),s(n,{data:d,params:m,time:new Date().getTime()}),a.current=z(n,function(w){e.setState({data:w})}))},onMutate:function(d){var m;n&&((m=a.current)===null||m===void 0||m.call(a),s(n,{data:d,params:e.state.params,time:new Date().getTime()}),a.current=z(n,function(h){e.setState({data:h})}))}}:{}};const we=be;var Re=function(e,r){var n=r.debounceWait,t=r.debounceLeading,u=r.debounceTrailing,i=r.debounceMaxWait,o=v.useRef(),f=v.useMemo(function(){var c={};return t!==void 0&&(c.leading=t),u!==void 0&&(c.trailing=u),i!==void 0&&(c.maxWait=i),c},[t,u,i]);return v.useEffect(function(){if(n){var c=e.runAsync.bind(e);return o.current=oe(function(a){a()},n,f),e.runAsync=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return new Promise(function(s,p){var d;(d=o.current)===null||d===void 0||d.call(o,function(){c.apply(void 0,y([],b(a),!1)).then(s).catch(p)})})},function(){var a;(a=o.current)===null||a===void 0||a.cancel(),e.runAsync=c}}},[n,f]),n?{onCancel:function(){var c;(c=o.current)===null||c===void 0||c.cancel()}}:{}};const Pe=Re;var Ee=function(e,r){var n=r.loadingDelay,t=r.ready,u=v.useRef();if(!n)return{};var i=function(){u.current&&clearTimeout(u.current)};return{onBefore:function(){return i(),t!==!1&&(u.current=setTimeout(function(){e.setState({loading:!0})},n)),{loading:!1}},onFinally:function(){i()},onCancel:function(){i()}}};const Te=Ee;var Ce=!!(typeof window<"u"&&window.document&&window.document.createElement);const F=Ce;function V(){return F?document.visibilityState!=="hidden":!0}var D=[];function xe(e){return D.push(e),function(){var n=D.indexOf(e);D.splice(n,1)}}if(F){var Se=function(){if(V())for(var e=0;e<D.length;e++){var r=D[e];r()}};window.addEventListener("visibilitychange",Se,!1)}var $e=function(e,r){var n=r.pollingInterval,t=r.pollingWhenHidden,u=t===void 0?!0:t,i=r.pollingErrorRetryCount,o=i===void 0?-1:i,f=v.useRef(),c=v.useRef(),a=v.useRef(0),l=function(){var s;f.current&&clearTimeout(f.current),(s=c.current)===null||s===void 0||s.call(c)};return k(function(){n||l()},[n]),n?{onBefore:function(){l()},onError:function(){a.current+=1},onSuccess:function(){a.current=0},onFinally:function(){o===-1||o!==-1&&a.current<=o?f.current=setTimeout(function(){!u&&!V()?c.current=xe(function(){e.refresh()}):e.refresh()},n):a.current=0},onCancel:function(){l()}}:{}};const Ae=$e;function Oe(e,r){var n=!1;return function(){for(var t=[],u=0;u<arguments.length;u++)t[u]=arguments[u];n||(n=!0,e.apply(void 0,y([],b(t),!1)),setTimeout(function(){n=!1},r))}}function We(){return F&&typeof navigator.onLine<"u"?navigator.onLine:!0}var L=[];function Me(e){return L.push(e),function(){var n=L.indexOf(e);n>-1&&L.splice(n,1)}}if(F){var J=function(){if(!(!V()||!We()))for(var e=0;e<L.length;e++){var r=L[e];r()}};window.addEventListener("visibilitychange",J,!1),window.addEventListener("focus",J,!1)}var De=function(e,r){var n=r.refreshOnWindowFocus,t=r.focusTimespan,u=t===void 0?5e3:t,i=v.useRef(),o=function(){var f;(f=i.current)===null||f===void 0||f.call(i)};return v.useEffect(function(){if(n){var f=Oe(e.refresh.bind(e),u);i.current=Me(function(){f()})}return function(){o()}},[n,u]),H(function(){o()}),{}};const Le=De;var Be=function(e,r){var n=r.retryInterval,t=r.retryCount,u=v.useRef(),i=v.useRef(0),o=v.useRef(!1);return t?{onBefore:function(){o.current||(i.current=0),o.current=!1,u.current&&clearTimeout(u.current)},onSuccess:function(){i.current=0},onError:function(){if(i.current+=1,t===-1||i.current<=t){var f=n??Math.min(1e3*Math.pow(2,i.current),3e4);u.current=setTimeout(function(){o.current=!0,e.refresh()},f)}else i.current=0},onCancel:function(){i.current=0,u.current&&clearTimeout(u.current)}}:{}};const je=Be;var He=function(e,r){var n=r.throttleWait,t=r.throttleLeading,u=r.throttleTrailing,i=v.useRef(),o={};return t!==void 0&&(o.leading=t),u!==void 0&&(o.trailing=u),v.useEffect(function(){if(n){var f=e.runAsync.bind(e);return i.current=Y(function(c){c()},n,o),e.runAsync=function(){for(var c=[],a=0;a<arguments.length;a++)c[a]=arguments[a];return new Promise(function(l,s){var p;(p=i.current)===null||p===void 0||p.call(i,function(){f.apply(void 0,y([],b(c),!1)).then(l).catch(s)})})},function(){var c;e.runAsync=f,(c=i.current)===null||c===void 0||c.cancel()}}},[n,t,u]),n?{onCancel:function(){var f;(f=i.current)===null||f===void 0||f.cancel()}}:{}};const Fe=He;var Ke=function(e){j&&(A(e)||console.error('useMount: parameter `fn` expected to be a function, but got "'.concat(typeof e,'".'))),v.useEffect(function(){e==null||e()},[])};const Ne=Ke;var ze=function(){var e=b(v.useState({}),2),r=e[1];return v.useCallback(function(){return r({})},[])};const Ue=ze;var ke=function(){function e(r,n,t,u){u===void 0&&(u={}),this.serviceRef=r,this.options=n,this.subscribe=t,this.initState=u,this.count=0,this.state={loading:!1,params:void 0,data:void 0,error:void 0},this.state=T(T(T({},this.state),{loading:!n.manual}),u)}return e.prototype.setState=function(r){r===void 0&&(r={}),this.state=T(T({},this.state),r),this.subscribe()},e.prototype.runPluginHandler=function(r){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];var u=this.pluginImpls.map(function(i){var o;return(o=i[r])===null||o===void 0?void 0:o.call.apply(o,y([i],b(n),!1))}).filter(Boolean);return Object.assign.apply(Object,y([{}],b(u),!1))},e.prototype.runAsync=function(){for(var r,n,t,u,i,o,f,c,a,l,s=[],p=0;p<arguments.length;p++)s[p]=arguments[p];return ae(this,void 0,void 0,function(){var d,m,h,w,O,x,E,W,g,R,C;return ie(this,function(P){switch(P.label){case 0:if(this.count+=1,d=this.count,m=this.runPluginHandler("onBefore",s),h=m.stopNow,w=h===void 0?!1:h,O=m.returnNow,x=O===void 0?!1:O,E=X(m,["stopNow","returnNow"]),w)return[2,new Promise(function(){})];if(this.setState(T({loading:!0,params:s},E)),x)return[2,Promise.resolve(E.data)];(n=(r=this.options).onBefore)===null||n===void 0||n.call(r,s),P.label=1;case 1:return P.trys.push([1,3,,4]),W=this.runPluginHandler("onRequest",this.serviceRef.current,s).servicePromise,W||(W=(C=this.serviceRef).current.apply(C,y([],b(s),!1))),[4,W];case 2:return g=P.sent(),d!==this.count?[2,new Promise(function(){})]:(this.setState({data:g,error:void 0,loading:!1}),(u=(t=this.options).onSuccess)===null||u===void 0||u.call(t,g,s),this.runPluginHandler("onSuccess",g,s),(o=(i=this.options).onFinally)===null||o===void 0||o.call(i,s,g,void 0),d===this.count&&this.runPluginHandler("onFinally",s,g,void 0),[2,g]);case 3:if(R=P.sent(),d!==this.count)return[2,new Promise(function(){})];throw this.setState({error:R,loading:!1}),(c=(f=this.options).onError)===null||c===void 0||c.call(f,R,s),this.runPluginHandler("onError",R,s),(l=(a=this.options).onFinally)===null||l===void 0||l.call(a,s,void 0,R),d===this.count&&this.runPluginHandler("onFinally",s,void 0,R),R;case 4:return[2]}})})},e.prototype.run=function(){for(var r=this,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this.runAsync.apply(this,y([],b(n),!1)).catch(function(u){r.options.onError||console.error(u)})},e.prototype.cancel=function(){this.count+=1,this.setState({loading:!1}),this.runPluginHandler("onCancel")},e.prototype.refresh=function(){this.run.apply(this,y([],b(this.state.params||[]),!1))},e.prototype.refreshAsync=function(){return this.runAsync.apply(this,y([],b(this.state.params||[]),!1))},e.prototype.mutate=function(r){var n=A(r)?r(this.state.data):r;this.runPluginHandler("onMutate",n),this.setState({data:n})},e}();const qe=ke;function Ge(e,r,n){r===void 0&&(r={}),n===void 0&&(n=[]);var t=r.manual,u=t===void 0?!1:t,i=X(r,["manual"]);j&&r.defaultParams&&!Array.isArray(r.defaultParams)&&console.warn("expected defaultParams is array, got ".concat(typeof r.defaultParams));var o=T({manual:u},i),f=B(e),c=Ue(),a=_(function(){var l=n.map(function(s){var p;return(p=s==null?void 0:s.onInit)===null||p===void 0?void 0:p.call(s,o)}).filter(Boolean);return new qe(f,o,c,Object.assign.apply(Object,y([{}],b(l),!1)))},[]);return a.options=o,a.pluginImpls=n.map(function(l){return l(a,o)}),Ne(function(){if(!u){var l=a.state.params||r.defaultParams||[];a.run.apply(a,y([],b(l),!1))}}),H(function(){a.cancel()}),{loading:a.state.loading,data:a.state.data,error:a.state.error,params:a.state.params||[],cancel:M(a.cancel.bind(a)),refresh:M(a.refresh.bind(a)),refreshAsync:M(a.refreshAsync.bind(a)),run:M(a.run.bind(a)),runAsync:M(a.runAsync.bind(a)),mutate:M(a.mutate.bind(a))}}function sr(e,r,n){return Ge(e,r,y(y([],b(n||[]),!1),[Pe,Te,Ae,Le,Fe,de,we,je],!1))}function ee(e,r){if(F){if(!e)return r;var n;return A(e)?n=e():"current"in e?n=e.current:n=e,n}}var Ve=function(e){var r=function(n,t,u){var i=v.useRef(!1),o=v.useRef([]),f=v.useRef([]),c=v.useRef();e(function(){var a,l=Array.isArray(u)?u:[u],s=l.map(function(p){return ee(p)});if(!i.current){i.current=!0,o.current=s,f.current=t,c.current=n();return}(s.length!==o.current.length||!q(o.current,s)||!q(f.current,t))&&((a=c.current)===null||a===void 0||a.call(c),o.current=s,f.current=t,c.current=n())}),H(function(){var a;(a=c.current)===null||a===void 0||a.call(c),i.current=!1})};return r};const Je=Ve;var Qe=Je(v.useEffect);const Xe=Qe;var Ye=function(e,r){return e===void 0&&(e=[]),r===void 0&&(r=[]),ce(e,r)},Ze=function(e,r,n){var t=v.useRef(),u=v.useRef(0);Ye(r,t.current)||(t.current=r,u.current+=1),Xe(e,[u.current],n)};const Ie=Ze;var _e=/(mac|iphone|ipod|ipad)/i.test(typeof navigator<"u"?navigator==null?void 0:navigator.platform:"");const er=_e;var re={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pausebreak:19,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,leftwindowkey:91,rightwindowkey:92,meta:er?[91,93]:[91,92],selectkey:93,numpad0:96,numpad1:97,numpad2:98,numpad3:99,numpad4:100,numpad5:101,numpad6:102,numpad7:103,numpad8:104,numpad9:105,multiply:106,add:107,subtract:109,decimalpoint:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,semicolon:186,equalsign:187,comma:188,dash:189,period:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},G={ctrl:function(e){return e.ctrlKey},shift:function(e){return e.shiftKey},alt:function(e){return e.altKey},meta:function(e){return e.type==="keyup"?re.meta.includes(e.keyCode):e.metaKey}};function ne(e){return se(e)||Z(e)}function rr(e){var r=Object.keys(G).reduce(function(n,t){return G[t](e)?n+1:n},0);return[16,17,18,91,92].includes(e.keyCode)?r:r+1}function Q(e,r,n){var t,u;if(!e.key)return!1;if(Z(r))return e.keyCode===r?r:!1;var i=r.split("."),o=0;try{for(var f=U(i),c=f.next();!c.done;c=f.next()){var a=c.value,l=G[a],s=re[a.toLowerCase()];(l&&l(e)||s&&s===e.keyCode)&&o++}}catch(p){t={error:p}}finally{try{c&&!c.done&&(u=f.return)&&u.call(f)}finally{if(t)throw t.error}}return n?o===i.length&&rr(e)===i.length?r:!1:o===i.length?r:!1}function nr(e,r){return A(e)?e:ne(e)?function(n){return Q(n,e,r)}:Array.isArray(e)?function(n){return e.find(function(t){return Q(n,t,r)})}:function(){return!!e}}var tr=["keydown"];function lr(e,r,n){var t=n||{},u=t.events,i=u===void 0?tr:u,o=t.target,f=t.exactMatch,c=f===void 0?!1:f,a=t.useCapture,l=a===void 0?!1:a,s=B(r),p=B(e);Ie(function(){var d,m,h,w=ee(o,window);if(w){var O=function(g){var R,C=nr(p.current,c),P=C(g),S=ne(P)?P:g.key;if(P)return(R=s.current)===null||R===void 0?void 0:R.call(s,g,S)};try{for(var x=U(i),E=x.next();!E.done;E=x.next()){var W=E.value;(h=w==null?void 0:w.addEventListener)===null||h===void 0||h.call(w,W,O,l)}}catch(g){d={error:g}}finally{try{E&&!E.done&&(m=x.return)&&m.call(x)}finally{if(d)throw d.error}}return function(){var g,R,C;try{for(var P=U(i),S=P.next();!S.done;S=P.next()){var te=S.value;(C=w==null?void 0:w.removeEventListener)===null||C===void 0||C.call(w,te,O,l)}}catch(ue){g={error:ue}}finally{try{S&&!S.done&&(R=P.return)&&R.call(P)}finally{if(g)throw g.error}}}}},[i],o)}function dr(e,r){var n;j&&(A(e)||console.error("useThrottleFn expected parameter is a function, got ".concat(typeof e)));var t=B(e),u=(n=r==null?void 0:r.wait)!==null&&n!==void 0?n:1e3,i=v.useMemo(function(){return Y(function(){for(var o=[],f=0;f<arguments.length;f++)o[f]=arguments[f];return t.current.apply(t,y([],b(o),!1))},u,r)},[]);return H(function(){i.cancel()}),{run:i,cancel:i.cancel,flush:i.flush}}export{B as a,sr as b,Ne as c,k as d,dr as e,H as f,lr as u};
