import{c as fn}from"./micromark-util-combine-extensions-34ef5cdc.js";import{f as K}from"./micromark-factory-space-d1556c33.js";import{m as V}from"./micromark-util-character-c2e05b35.js";import{s as G,p as dn}from"./micromark-util-chunked-6f054bfc.js";import{b as hn,c as pn,l as b,a as xn,d as mn,e as H,h as gn,t as Q,s as Z,f as kn,g as nn,i as rn,j as sn,k as U,m as wn,n as J,o as bn,p as Cn,q as vn,r as _n,u as In,v as yn}from"./micromark-core-commonmark-c07aab3d.js";import{r as Sn}from"./micromark-util-resolve-all-8a85a8df.js";import{s as An}from"./micromark-util-subtokenize-df14a385.js";const zn={tokenize:Tn};function Tn(n){const t=n.attempt(this.parser.constructs.contentInitial,e,i);let s;return t;function e(l){if(l===null){n.consume(l);return}return n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),K(n,t,"linePrefix")}function i(l){return n.enter("paragraph"),r(l)}function r(l){const d=n.enter("chunkText",{contentType:"text",previous:s});return s&&(s.next=d),s=d,u(l)}function u(l){if(l===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(l);return}return V(l)?(n.consume(l),n.exit("chunkText"),r):(n.consume(l),u)}}const Fn={tokenize:En},en={tokenize:On};function En(n){const t=this,s=[];let e=0,i,r,u;return l;function l(a){if(e<s.length){const k=s[e];return t.containerState=k[1],n.attempt(k[0].continuation,d,o)(a)}return o(a)}function d(a){if(e++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&F();const k=t.events.length;let w=k,m;for(;w--;)if(t.events[w][0]==="exit"&&t.events[w][1].type==="chunkFlow"){m=t.events[w][1].end;break}S(e);let C=k;for(;C<t.events.length;)t.events[C][1].end=Object.assign({},m),C++;return G(t.events,w+1,0,t.events.slice(k)),t.events.length=C,o(a)}return l(a)}function o(a){if(e===s.length){if(!i)return x(a);if(i.currentConstruct&&i.currentConstruct.concrete)return y(a);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},n.check(en,h,p)(a)}function h(a){return i&&F(),S(e),x(a)}function p(a){return t.parser.lazy[t.now().line]=e!==s.length,u=t.now().offset,y(a)}function x(a){return t.containerState={},n.attempt(en,v,y)(a)}function v(a){return e++,s.push([t.currentConstruct,t.containerState]),x(a)}function y(a){if(a===null){i&&F(),S(0),n.consume(a);return}return i=i||t.parser.flow(t.now()),n.enter("chunkFlow",{contentType:"flow",previous:r,_tokenizer:i}),O(a)}function O(a){if(a===null){B(n.exit("chunkFlow"),!0),S(0),n.consume(a);return}return V(a)?(n.consume(a),B(n.exit("chunkFlow")),e=0,t.interrupt=void 0,l):(n.consume(a),O)}function B(a,k){const w=t.sliceStream(a);if(k&&w.push(null),a.previous=r,r&&(r.next=a),r=a,i.defineSkip(a.start),i.write(w),t.parser.lazy[a.start.line]){let m=i.events.length;for(;m--;)if(i.events[m][1].start.offset<u&&(!i.events[m][1].end||i.events[m][1].end.offset>u))return;const C=t.events.length;let A=C,j,z;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){if(j){z=t.events[A][1].end;break}j=!0}for(S(e),m=C;m<t.events.length;)t.events[m][1].end=Object.assign({},z),m++;G(t.events,A+1,0,t.events.slice(C)),t.events.length=m}}function S(a){let k=s.length;for(;k-- >a;){const w=s[k];t.containerState=w[1],w[0].exit.call(t,n)}s.length=a}function F(){i.write([null]),r=void 0,i=void 0,t.containerState._closeFlow=void 0}}function On(n,t,s){return K(n,n.attempt(this.parser.constructs.document,t,s),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const Bn={tokenize:jn};function jn(n){const t=this,s=n.attempt(hn,e,n.attempt(this.parser.constructs.flowInitial,i,K(n,n.attempt(this.parser.constructs.flow,i,n.attempt(pn,i)),"linePrefix")));return s;function e(r){if(r===null){n.consume(r);return}return n.enter("lineEndingBlank"),n.consume(r),n.exit("lineEndingBlank"),t.currentConstruct=void 0,s}function i(r){if(r===null){n.consume(r);return}return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),t.currentConstruct=void 0,s}}const Pn={resolveAll:un()},Ln=on("string"),$n=on("text");function on(n){return{tokenize:t,resolveAll:un(n==="text"?Mn:void 0)};function t(s){const e=this,i=this.parser.constructs[n],r=s.attempt(i,u,l);return u;function u(h){return o(h)?r(h):l(h)}function l(h){if(h===null){s.consume(h);return}return s.enter("data"),s.consume(h),d}function d(h){return o(h)?(s.exit("data"),r(h)):(s.consume(h),d)}function o(h){if(h===null)return!0;const p=i[h];let x=-1;if(p)for(;++x<p.length;){const v=p[x];if(!v.previous||v.previous.call(e,e.previous))return!0}return!1}}}function un(n){return t;function t(s,e){let i=-1,r;for(;++i<=s.length;)r===void 0?s[i]&&s[i][1].type==="data"&&(r=i,i++):(!s[i]||s[i][1].type!=="data")&&(i!==r+2&&(s[r][1].end=s[i-1][1].end,s.splice(r+2,i-r-2),i=r+2),r=void 0);return n?n(s,e):s}}function Mn(n,t){let s=0;for(;++s<=n.length;)if((s===n.length||n[s][1].type==="lineEnding")&&n[s-1][1].type==="data"){const e=n[s-1][1],i=t.sliceStream(e);let r=i.length,u=-1,l=0,d;for(;r--;){const o=i[r];if(typeof o=="string"){for(u=o.length;o.charCodeAt(u-1)===32;)l++,u--;if(u)break;u=-1}else if(o===-2)d=!0,l++;else if(o!==-1){r++;break}}if(l){const o={type:s===n.length||d||l<2?"lineSuffix":"hardBreakTrailing",start:{line:e.end.line,column:e.end.column-l,offset:e.end.offset-l,_index:e.start._index+r,_bufferIndex:r?u:e.start._bufferIndex+u},end:Object.assign({},e.end)};e.end=Object.assign({},o.start),e.start.offset===e.end.offset?Object.assign(e,o):(n.splice(s,0,["enter",o,t],["exit",o,t]),s+=2)}s++}return n}function Nn(n,t,s){let e=Object.assign(s?Object.assign({},s):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},r=[];let u=[],l=[];const d={consume:F,enter:a,exit:k,attempt:C(w),check:C(m),interrupt:C(m,{interrupt:!0})},o={previous:null,code:null,containerState:{},events:[],parser:n,sliceStream:v,sliceSerialize:x,now:y,defineSkip:O,write:p};let h=t.tokenize.call(o,d);return t.resolveAll&&r.push(t),o;function p(c){return u=dn(u,c),B(),u[u.length-1]!==null?[]:(A(t,0),o.events=Sn(r,o.events,o),o.events)}function x(c,f){return Rn(v(c),f)}function v(c){return Dn(u,c)}function y(){const{line:c,column:f,offset:_,_index:I,_bufferIndex:E}=e;return{line:c,column:f,offset:_,_index:I,_bufferIndex:E}}function O(c){i[c.line]=c.column,z()}function B(){let c;for(;e._index<u.length;){const f=u[e._index];if(typeof f=="string")for(c=e._index,e._bufferIndex<0&&(e._bufferIndex=0);e._index===c&&e._bufferIndex<f.length;)S(f.charCodeAt(e._bufferIndex));else S(f)}}function S(c){h=h(c)}function F(c){V(c)?(e.line++,e.column=1,e.offset+=c===-3?2:1,z()):c!==-1&&(e.column++,e.offset++),e._bufferIndex<0?e._index++:(e._bufferIndex++,e._bufferIndex===u[e._index].length&&(e._bufferIndex=-1,e._index++)),o.previous=c}function a(c,f){const _=f||{};return _.type=c,_.start=y(),o.events.push(["enter",_,o]),l.push(_),_}function k(c){const f=l.pop();return f.end=y(),o.events.push(["exit",f,o]),f}function w(c,f){A(c,f.from)}function m(c,f){f.restore()}function C(c,f){return _;function _(I,E,P){let N,L,W,D;return Array.isArray(I)?R(I):"tokenize"in I?R([I]):ln(I);function ln(g){return q;function q(T){const $=T!==null&&g[T],M=T!==null&&g.null,cn=[...Array.isArray($)?$:$?[$]:[],...Array.isArray(M)?M:M?[M]:[]];return R(cn)(T)}}function R(g){return N=g,L=0,g.length===0?P:X(g[L])}function X(g){return q;function q(T){return D=j(),W=g,g.partial||(o.currentConstruct=g),g.name&&o.parser.constructs.disable.null.includes(g.name)?Y():g.tokenize.call(f?Object.assign(Object.create(o),f):o,d,an,Y)(T)}}function an(g){return c(W,D),E}function Y(g){return D.restore(),++L<N.length?X(N[L]):P}}}function A(c,f){c.resolveAll&&!r.includes(c)&&r.push(c),c.resolve&&G(o.events,f,o.events.length-f,c.resolve(o.events.slice(f),o)),c.resolveTo&&(o.events=c.resolveTo(o.events,o))}function j(){const c=y(),f=o.previous,_=o.currentConstruct,I=o.events.length,E=Array.from(l);return{restore:P,from:I};function P(){e=c,o.previous=f,o.currentConstruct=_,o.events.length=I,l=E,z()}}function z(){e.line in i&&e.column<2&&(e.column=i[e.line],e.offset+=i[e.line]-1)}}function Dn(n,t){const s=t.start._index,e=t.start._bufferIndex,i=t.end._index,r=t.end._bufferIndex;let u;if(s===i)u=[n[s].slice(e,r)];else{if(u=n.slice(s,i),e>-1){const l=u[0];typeof l=="string"?u[0]=l.slice(e):u.shift()}r>0&&u.push(n[i].slice(0,r))}return u}function Rn(n,t){let s=-1;const e=[];let i;for(;++s<n.length;){const r=n[s];let u;if(typeof r=="string")u=r;else switch(r){case-5:{u="\r";break}case-4:{u=`
`;break}case-3:{u=`\r
`;break}case-2:{u=t?" ":"	";break}case-1:{if(!t&&i)continue;u=" ";break}default:u=String.fromCharCode(r)}i=r===-2,e.push(u)}return e.join("")}const qn={42:b,43:b,45:b,48:b,49:b,50:b,51:b,52:b,53:b,54:b,55:b,56:b,57:b,62:xn},Hn={91:mn},Qn={[-2]:H,[-1]:H,32:H},Un={35:gn,42:Q,45:[Z,Q],60:kn,61:Z,95:Q,96:nn,126:nn},Gn={38:rn,92:sn},Jn={[-5]:U,[-4]:U,[-3]:U,33:wn,38:rn,42:J,60:[bn,Cn],91:vn,92:[_n,sn],93:In,95:J,96:yn},Kn={null:[J,Pn]},Vn={null:[42,95]},Wn={null:[]},Xn=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Vn,contentInitial:Hn,disable:Wn,document:qn,flow:Un,flowInitial:Qn,insideSpan:Kn,string:Gn,text:Jn},Symbol.toStringTag,{value:"Module"}));function se(n){const s=fn([Xn,...(n||{}).extensions||[]]),e={defined:[],lazy:{},constructs:s,content:i(zn),document:i(Fn),flow:i(Bn),string:i(Ln),text:i($n)};return e;function i(r){return u;function u(l){return Nn(e,r,l)}}}function oe(n){for(;!An(n););return n}const tn=/[\0\t\n\r]/g;function ue(){let n=1,t="",s=!0,e;return i;function i(r,u,l){const d=[];let o,h,p,x,v;for(r=t+(typeof r=="string"?r.toString():new TextDecoder(u||void 0).decode(r)),p=0,t="",s&&(r.charCodeAt(0)===65279&&p++,s=void 0);p<r.length;){if(tn.lastIndex=p,o=tn.exec(r),x=o&&o.index!==void 0?o.index:r.length,v=r.charCodeAt(x),!o){t=r.slice(p);break}if(v===10&&p===x&&e)d.push(-3),e=void 0;else switch(e&&(d.push(-5),e=void 0),p<x&&(d.push(r.slice(p,x)),n+=x-p),v){case 0:{d.push(65533),n++;break}case 9:{for(h=Math.ceil(n/4)*4,d.push(-2);n++<h;)d.push(-1);break}case 10:{d.push(-4),n=1;break}default:e=!0,n=1}p=x+1}return l&&(e&&d.push(-5),t&&d.push(t),d.push(null)),d}}export{se as a,ue as b,oe as p};
