import{o as M}from"./devlop-d057c9d1.js";import{f as L,n as b,s as h,h as g}from"./property-information-33d7f5d8.js";import{w as O}from"./web-namespaces-a6665c10.js";import{l as k}from"./vfile-location-f7aeb950.js";import{p as w}from"./comma-separated-tokens-495b557e.js";import{p as x}from"./space-separated-tokens-eedf1754.js";const T=/[#.]/g;function G(e,n){const t=e||"",r={};let i=0,a,o;for(;i<t.length;){T.lastIndex=i;const s=T.exec(t),c=t.slice(i,s?s.index:t.length);c&&(a?a==="#"?r.id=c:Array.isArray(r.className)?r.className.push(c):r.className=[c]:o=c,i+=c.length),s&&(a=s[0],i++)}return{type:"element",tagName:o||n||"div",properties:r,children:[]}}const D=new Set(["button","menu","reset","submit"]),d={}.hasOwnProperty;function S(e,n,t){const r=t&&R(t);function i(a,o,...s){let c=-1,f;if(a==null){f={type:"root",children:[]};const l=o;s.unshift(l)}else if(f=G(a,n),f.tagName=f.tagName.toLowerCase(),r&&d.call(r,f.tagName)&&(f.tagName=r[f.tagName]),F(o,f.tagName)){let l;for(l in o)d.call(o,l)&&B(e,f.properties,l,o[l])}else s.unshift(o);for(;++c<s.length;)u(f.children,s[c]);return f.type==="element"&&f.tagName==="template"&&(f.content={type:"root",children:f.children},f.children=[]),f}return i}function F(e,n){return e==null||typeof e!="object"||Array.isArray(e)?!1:n==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:n==="button"?D.has(e.type.toLowerCase()):!("value"in e)}function B(e,n,t,r){const i=L(e,t);let a=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=x(r):i.commaSeparated?o=w(r):i.commaOrSpaceSeparated?o=x(w(r).join(" ")):o=A(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?I(r):String(r);if(Array.isArray(o)){const s=[];for(;++a<o.length;){const c=A(i,i.property,o[a]);s[a]=c}o=s}if(i.property==="className"&&Array.isArray(n.className)){const s=o;o=n.className.concat(s)}n[i.property]=o}}function u(e,n){let t=-1;if(n!=null)if(typeof n=="string"||typeof n=="number")e.push({type:"text",value:String(n)});else if(Array.isArray(n))for(;++t<n.length;)u(e,n[t]);else if(typeof n=="object"&&"type"in n)n.type==="root"?u(e,n.children):e.push(n);else throw new Error("Expected node, nodes, or string, got `"+n+"`")}function A(e,n,t){if(typeof t=="string"){if(e.number&&t&&!Number.isNaN(Number(t)))return Number(t);if((e.boolean||e.overloadedBoolean)&&(t===""||b(t)===b(n)))return!0}return t}function I(e){const n=[];let t;for(t in e)d.call(e,t)&&n.push([t,e[t]].join(": "));return n.join("; ")}function R(e){const n={};let t=-1;for(;++t<e.length;)n[e[t].toLowerCase()]=e[t];return n}const q=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],E=S(g,"div"),$=S(h,"g",q),P={}.hasOwnProperty,z=Object.prototype;function Y(e,n){const t=n||{};return y({file:t.file||void 0,location:!1,schema:t.space==="svg"?h:g,verbose:t.verbose||!1},e)}function y(e,n){let t;switch(n.nodeName){case"#comment":{const r=n;return t={type:"comment",value:r.data},m(e,r,t),t}case"#document":case"#document-fragment":{const r=n,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(t={type:"root",children:j(e,n.childNodes),data:{quirksMode:i}},e.file&&e.location){const a=String(e.file),o=k(a),s=o.toPoint(0),c=o.toPoint(a.length);t.position={start:s,end:c}}return t}case"#documentType":{const r=n;return t={type:"doctype"},m(e,r,t),t}case"#text":{const r=n;return t={type:"text",value:r.value},m(e,r,t),t}default:return t=H(e,n),t}}function j(e,n){let t=-1;const r=[];for(;++t<n.length;){const i=y(e,n[t]);r.push(i)}return r}function H(e,n){const t=e.schema;e.schema=n.namespaceURI===O.svg?h:g;let r=-1;const i={};for(;++r<n.attrs.length;){const s=n.attrs[r],c=(s.prefix?s.prefix+":":"")+s.name;P.call(z,c)||(i[c]=s.value)}const o=(e.schema.space==="svg"?$:E)(n.tagName,i,j(e,n.childNodes));if(m(e,n,o),o.tagName==="template"){const s=n,c=s.sourceCodeLocation,f=c&&c.startTag&&p(c.startTag),l=c&&c.endTag&&p(c.endTag),N=y(e,s.content);f&&l&&e.file&&(N.position={start:f.end,end:l.start}),o.content=N}return e.schema=t,o}function m(e,n,t){if("sourceCodeLocation"in n&&n.sourceCodeLocation&&e.file){const r=U(e,t,n.sourceCodeLocation);r&&(e.location=!0,t.position=r)}}function U(e,n,t){const r=p(t);if(n.type==="element"){const i=n.children[n.children.length-1];if(r&&!t.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const a={};let o;if(t.attrs)for(o in t.attrs)P.call(t.attrs,o)&&(a[L(e.schema,o).property]=p(t.attrs[o]));M(t.startTag);const s=p(t.startTag),c=t.endTag?p(t.endTag):void 0,f={opening:s};c&&(f.closing=c),f.properties=a,n.data={position:f}}}return r}function p(e){const n=C({line:e.startLine,column:e.startCol,offset:e.startOffset}),t=C({line:e.endLine,column:e.endCol,offset:e.endOffset});return n||t?{start:n,end:t}:void 0}function C(e){return e.line&&e.column?e:void 0}export{Y as f};
